{% extends 'template/admin/_post.twig' %}
{% block page_name %}Manage Extensions{% endblock %}
{% block body %}
  <section class="content">
      <div class="card-body">
          {% if get_flash_message("notification_warning") %}
            <div class="alert alert-warning" role="alert">
              {{get_flash_message("notification_warning")}}
            </div>
          {% endif %}
          {% if get_flash_message("notification_success") %}
            <div class="alert alert-success" role="alert">
              {{get_flash_message("notification_success")}}
            </div>
          {% endif %}
          {% if form.type == 'list'%}
            <button type="button" class="btn btn-primary mb-3" data-bs-toggle="modal" data-bs-target="#extensionModal">
              {{ form.title }}
            </button>
            <div class="modal fade" id="extensionModal" tabindex="-1" aria-labelledby="extensionModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-lg">
                  <div class="modal-content">
                      <div class="modal-header">
                          <h5 class="modal-title" id="extensionModalLabel"> {{ form.title }}</h5>
                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        {{ form.form | raw }}
                      </div>
                  </div>
              </div>
            </div>
            {% if table is not empty %}
              <table class="table table-striped table-hover">
                  <thead>
                      <tr>
                          {% for key, value in table[0] %}
                              <th>{{ key }}</th>
                          {% endfor %}
                          <th>Action</th>
                      </tr>
                  </thead>
                  <tbody>
                      {% for key, item in table %}
                          <tr>
                            {% for key, value in item %}
                              <td>
                                {{ parse_value(key, value) | raw }}
                              </td>
                            {% endfor %}
                            <td>
                              <a href="/admin/extension/remove?id={{item.id}}">Remove</a>
                            </td>
                          </tr>
                      {% endfor %}
                  </tbody>
              </table>
            {% else %}
              <p>No items available.</p>
            {% endif %}
            
          {% else %}
            {{ form.form | raw }}
          {% endif %}
      </div>
  </section>
{% endblock %}